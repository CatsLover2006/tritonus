<?xml version="1.0"?>
<!-- If a tool complains that project.dtd is not available,
     run the following command:
     ant -f build-dtd.xml
-->
<!DOCTYPE project SYSTEM "project.dtd" [
<!ENTITY common SYSTEM "build-common.xml">
]>

<project name="tritonus" default="dist" basedir=".">

  <taskdef name="ajc"
    classname="org.aspectj.tools.ant.taskdefs.Ajc" >
 </taskdef>


  &common;


  <target name="compile" depends="prepare">
    <!-- Here, the compilation is separated into parts due to an obscure problem. Memory shortage? -->
    <ajc srcdir="${src}"
	 destdir="${build}"
	 debug="on"
	 includes="javax/sound/,org/tritonus/core/,org/tritonus/share/,org/tritonus/debug/AJDebug.java,org/tritonus/debug/Utils.java" 
	 excludes="org/tritonus/share/sampled/AudioSystemShadow.java" >
    </ajc>

    <ajc srcdir="${src}"
	 destdir="${build}"
	 debug="on"
	 includes="org/tritonus/lowlevel/,org/tritonus/midi/,org/tritonus/sampled/"
	 excludes="org/tritonus/sampled/convert/javalayer/,org/tritonus/sampled/convert/vorbis/,org/tritonus/sampled/file/vorbis/,org/tritonus/midi/device/midishare/" >
      <classpath>
	<pathelement path="${classpath}"/>
	<pathelement location="build"/>
      </classpath>
    </ajc>
<!--
    <javac srcdir="${src.classes}"
	   debug="on"
	   destdir="${build}"
	   includes="org/tritonus/lowlevel/dsp/" />
-->
  </target>

  <target name="compile-javalayer-dependent"
	  depends="prepare"
	  if="javalayer-present">
    <ajc srcdir="${src}"
	 destdir="${build}"
	 debug="on"
	 includes="org/tritonus/sampled/convert/javalayer/" >
      <classpath>
	<pathelement path="${classpath}"/>
	<pathelement location="build"/>
      </classpath>
    </ajc>
  </target>

  <target name="compile-jorbis-dependent"
	  depends="prepare"
	  if="jorbis-present">
    <ajc srcdir="${src}"
	 destdir="${build}"
	 debug="on"
	 includes="org/tritonus/sampled/convert/vorbis/,org/tritonus/sampled/file/vorbis/,org/tritonus/debug/AJDebugVorbis.java" >
      <classpath>
	<pathelement path="${classpath}"/>
	<pathelement location="build"/>
      </classpath>
    </ajc>
  </target>

  <target name="compile-midishare-dependent"
	  depends="prepare"
	  if="midishare-present">
    <javac srcdir="${src}"
	   destdir="${build}"
	   includes="org/tritonus/midi/device/midishare/" />
  </target>


</project>
