README.midi
-----------

ALSA
----

The MIDI stuff of tritonus makes heavy use of the ALSA sequencer.
ALSA is the Advanced Linux Sound Architecture
(http://www.alsa-project.org), a new soundcard driver system intended
to replace the OSS/Free driver in future kernels.


HOW TO MAKE IT WORK
-------------------

Use a recent 2.2 kernel. The developer of this stuff uses 2.2.10 and
2.2.14 kernels; every kernel newer than 2.2.3 should work. In the
kernel configuration, enable sound support, but do not include any
concrete driver.  Enabling kernel symbol versioning helps if you
recompile kernels frequently.

Download and install the ALSA drivers/lib/utils version 0.5.x.
You cannot use earlier versions of ALSA due to incompatible
changes.  Be sure to configure '--with-sequencer=yes' in the driver
part.  Install the modules and load the new versions.  Load the
sequencer modules. For help on installing ALSA, see the alsa-user
mailing list (visit the ALSA web site).


Installation check
------------------

> cat /proc/asound/seq/clients
The result should be similar to this:
Client info
  cur  clients : 2
  peak clients : 2
  max  clients : 192

Client   0 : "System" [Kernel]
  Port   0 : "Timer" (system:Rwe:Rwe)
  Port   1 : "Announce" (system:R-e:R-e)
Client  64 : "0: MIDI Synth" [Kernel]
  Port   0 : "MIDI 0-0" (device:RWe:RWe)

If the file doesn't exist at all, load the sequencer module:

	modprobe snd-seq

If the file exists, but the "MIDI Synth" doesn't show up, load the
MIDI client module:

	modprobe snd-seq-midi

If the internal synthesizer of your card is supported (not all
cards), you can load the synth support, too:

	modprobe snd-seq-synth

There may be additional lines if you have more than one soundcard,
your soundcard has more than one MIDI port or the internal synth of
the soundcard is supported.

Second install check
--------------------

Install pmidi (http://www.parabola.demon.co.uk/alsa/pmidi.html).
You need version 1.4.0 or later.
Call 'pmidi -l'. The output should be similar to this:
 Port     Client name                       Port name
 64:0     0: MIDI Synth                     MIDI 0-0

Connect a synthesizer to the MIDI out of your computer.  Call 'pmidi
-p 64:0 <midifile>'.  '64:0' should be the number shown in the first
column of the output from 'pmidi -l'. The MIDI file should be played
on your synth.

(Hopefully) finished!
---------------------

Now you should be able to use Tritonus with the ALSA sequencer.